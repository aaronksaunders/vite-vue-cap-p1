import{d as U,u as A,r,c as B,w as t,a as e,o as p,b as a,t as D,v as S,h as i,I as h,p as k,f,g,i as _,H as I,O as b,l as w,X as q,m as E,n as L,Y as R,Z as T}from"./index-edb0c6b6.js";const H=["onSubmit"],O={key:0,class:"image-preview-container fade",id:"image-preview-container"},j=["src"],X=U({__name:"AddProductPage",setup(F){const C=A(),c=r(""),m=r(""),v=r(""),s=r(),d=r(null),n=r(null),y=r(null),x=u=>{var l;s.value=(l=u==null?void 0:u.target)==null?void 0:l.files[0],n.value=URL.createObjectURL(s.value),y.value=s.value.name},P=()=>{n.value=null,y.value=null,d.value&&(d.value.value="")},N=async()=>{try{const{data:u,error:l}=await R(s.value);if(l)throw l;const{data:o,error:V}=await T({name:c.value,description:m.value,price:Number(v.value),imageUrl:u==null?void 0:u.url});if(V)throw V;c.value="",m.value="",v.value="",s.value=null,n.value=null,d.value&&(d.value.value="")}catch(u){console.log(u)}};return(u,l)=>(p(),B(e(L),null,{default:t(()=>[a(e(h),null,{default:t(()=>[a(e(D),null,{default:t(()=>[a(e(S),null,{default:t(()=>[i("Add Product")]),_:1})]),_:1})]),_:1}),a(e(E),{class:"ion-padding"},{default:t(()=>[k("form",{onSubmit:q(N,["prevent"])},[a(e(f),null,{default:t(()=>[a(e(g),{position:"floating"},{default:t(()=>[i("Name")]),_:1}),a(e(_),{type:"text",modelValue:c.value,"onUpdate:modelValue":l[0]||(l[0]=o=>c.value=o),required:""},null,8,["modelValue"])]),_:1}),a(e(f),null,{default:t(()=>[a(e(g),{position:"floating"},{default:t(()=>[i("Description")]),_:1}),a(e(_),{type:"text",modelValue:m.value,"onUpdate:modelValue":l[1]||(l[1]=o=>m.value=o),required:""},null,8,["modelValue"])]),_:1}),a(e(f),null,{default:t(()=>[a(e(g),{position:"floating"},{default:t(()=>[i("Price")]),_:1}),a(e(_),{type:"number",modelValue:v.value,"onUpdate:modelValue":l[2]||(l[2]=o=>v.value=o),required:""},null,8,["modelValue"])]),_:1}),a(e(f),null,{default:t(()=>[a(e(g),null,{default:t(()=>[i("Image")]),_:1}),k("input",{type:"file",onChange:l[3]||(l[3]=o=>x(o)),accept:"image/*",required:"",ref_key:"imageInput",ref:d},null,544)]),_:1}),n.value?(p(),I("div",O,[n.value?(p(),I("img",{key:0,src:n.value,class:"image-preview fade",id:"image-preview"},null,8,j)):b("",!0),n.value?(p(),I("button",{key:1,class:"image-preview-clear",onClick:P}," Clear ")):b("",!0)])):b("",!0),a(e(w),{type:"submit",expand:"block"},{default:t(()=>[i("Add Product")]),_:1}),a(e(w),{type:"button",onClick:l[4]||(l[4]=o=>e(C).back()),expand:"block"},{default:t(()=>[i("Cancel")]),_:1})],40,H)]),_:1})]),_:1}))}});export{X as default};
